let lastTemperature = null; // För att lagra den senaste temperaturen
let lastArrowDirection = null; // För att lagra den senaste pilens riktning

// Funktion som uppdaterar temperatur och kallar på updateTemperatureColor
function updateTemperature() {
    const temperatureElement = document.getElementById("temperature");
    
    // Vi behöver extrahera temperaturen från den externa script-taggen.
    const temperatureText = temperatureElement.textContent;

    // Om temperaturtexten innehåller ett nummer, analysera det
    const temperature = parseFloat(temperatureText);
    if (!isNaN(temperature)) {
        updateTemperatureColor(temperature);
        
        if (lastTemperature !== null) {
            if (temperature > lastTemperature) {
                // Om temperaturen har ökat
                lastArrowDirection = 'up'; // Lagras senaste riktningen som upp
            } else if (temperature < lastTemperature) {
                // Om temperaturen har minskat
                lastArrowDirection = 'down'; // Lagras senaste riktningen som ner
            }
        }
        
        // Uppdatera senaste temperaturen
        lastTemperature = temperature;

        // Visa pilen baserat på senaste riktningen
        const arrowUp = document.getElementById('arrow-up');
        const arrowDown = document.getElementById('arrow-down');
        
        if (lastArrowDirection === 'up') {
            arrowUp.style.visibility = 'visible';
            arrowDown.style.visibility = 'hidden';
        } else if (lastArrowDirection === 'down') {
            arrowDown.style.visibility = 'visible';
            arrowUp.style.visibility = 'hidden';
        } else {
            // Om ingen förändring, visa ingen pil
            arrowUp.style.visibility = 'hidden';
            arrowDown.style.visibility = 'hidden';
        }
    }
}

// Uppdatera temperaturen och färg efter att skriptet har laddats
setInterval(updateTemperature, 1000); // Uppdaterar var 1 sekund för att fånga förändringar i temperatur
