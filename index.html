<script>
    async function fetchTemperature() {
        const errorMessageElement = document.getElementById("error-message");
        const temperatureLink = document.getElementById("temperature-link");

        try {
            const response = await fetch("https://api.temperatur.nu/tnu_1.17.php?p=pitea-lindbacksstadion&verbose");

            if (!response.ok) throw new Error(`API svarade med status: ${response.status}`);
            
            const data = await response.json();
            
            if (!data.temperatur || data.temperatur.nu.length === 0) {
                throw new Error("Ingen temperaturdata hittades.");
            }

            const temperature = data.temperatur.nu[0].temp + " °C";
            temperatureLink.textContent = temperature;
            temperatureLink.href = "https://www.temperatur.nu/pitea-lindbacksstadion";
            errorMessageElement.textContent = ""; // Rensa eventuella fel
        } catch (error) {
            // Visa endast "x.x" om temperaturen inte kan hämtas
            temperatureLink.textContent = "x.x";
            temperatureLink.href = "https://www.temperatur.nu/pitea-lindbacksstadion";
            errorMessageElement.textContent = "Kunde inte hämta temperaturen just nu. Försök igen senare.";
            console.error("Error fetching temperature data:", error);
        }
    }

    fetchTemperature();

    setInterval(fetchTemperature, 180000);
</script>
